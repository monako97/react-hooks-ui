"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}:function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});var __setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}:function(o,v){o["default"]=v});var __importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:true});var react_1=__importStar(require("react"));var react_dom_1=require("react-dom");var get_max_zIndex_1=__importDefault(require("../utils/get-max-zIndex"));require("./index.css");var icons={loading:"",info:"icon-info",success:"icon-success",danger:"icon-circle",primary:"icon-zan",warning:"icon-warning"};var Toast=function(_a){var notice=_a.notice,duration=_a.duration,close=_a.close,parentNode=_a.parentNode,panelBox=_a.panelBox;var _b=react_1.useState(true),show=_b[0],setShow=_b[1];var _c=react_1.useState(),closeTimer=_c[0],setCloseTimer=_c[1];var handleColse=react_1.useCallback(function(){window.clearTimeout(closeTimer);setShow(false);var _timer=window.setTimeout(function(){window.clearTimeout(_timer);react_dom_1.unmountComponentAtNode(parentNode);panelBox.removeChild(parentNode)},300)},[closeTimer,panelBox,parentNode]);var closeEvent=react_1.useCallback(function(){return window.setTimeout(function(){handleColse()},duration)},[duration,handleColse]);react_1.useEffect(function(){if(duration!==-1){setCloseTimer(closeEvent())}return function(){window.clearTimeout(closeTimer)}},[]);return react_1.default.createElement("div",{className:""+notice.type+(show?"":" react-toast-exit")},react_1.default.createElement("i",{className:"monako__icon ".concat(icons[notice.type])}),react_1.default.createElement("strong",null,notice.content),close?react_1.default.createElement("i",{className:"monako__icon icon-close close",onClick:function(){return handleColse()}}):null)};var notice=function(type,content,duration,close){if(duration===void 0){duration=4e3}var panelBox=document.getElementById("@monako__panel--box");var isOldPanel=Boolean(panelBox);if(!panelBox){panelBox=document.createElement("div");panelBox.id="@monako__panel--box";panelBox.style.display="contents";panelBox.style.position="fixed"}var div=document.createElement("div");div.className="react-toast "+type;div.style.zIndex=get_max_zIndex_1.default()+2+"";panelBox.appendChild(div);if(!isOldPanel){document.body.appendChild(panelBox)}react_dom_1.render(react_1.default.createElement(Toast,{notice:{content:content,type:type},close:close,duration:duration,parentNode:div,panelBox:panelBox}),div)};var toast={info:function(content,duration,close){return notice("info",content,duration,close)},success:function(content,duration,close){return notice("success",content,duration,close)},danger:function(content,duration,close){return notice("danger",content,duration,close)},loading:function(content,duration,close){return notice("loading",content,duration,close)},warn:function(content,duration,close){return notice("warning",content,duration,close)},primary:function(content,duration,close){return notice("primary",content,duration,close)}};exports.default=toast;